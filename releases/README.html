<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/README.md at 2019-08-06
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190806" />
    <meta http-equiv="Content-Language" content="en" />
    <title>maven-build &#x2013; maven-build</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="README.html" title="README">README</a></li>
            <li><a href="GITFLOW_RELEASE.html" title="How to release Apache Maven projects">How to release Apache Maven projects</a></li>
            <li><a href="TRAVISCI.html" title="travis-ci build">travis-ci build</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="build-docker/index.html" title="build-docker">build-docker</a></li>
            <li><a href="#" title="-----">-----</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="checkstyle.html" title="Checkstyle">Checkstyle</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>maven-build</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2019-08-06<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.3.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">DOCUMENTATION</li>
    <li class="active"><a href="#"><span class="none"></span>README</a></li>
    <li><a href="GITFLOW_RELEASE.html" title="How to release Apache Maven projects"><span class="none"></span>How to release Apache Maven projects</a></li>
    <li><a href="TRAVISCI.html" title="travis-ci build"><span class="none"></span>travis-ci build</a></li>
      <li class="nav-header">Projects</li>
    <li><a href="build-docker/index.html" title="build-docker"><span class="none"></span>build-docker</a></li>
    <li><a href="#" title="-----"><span class="none"></span>-----</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>maven-build</h1>
<p><a class="externalLink" href="https://sonarcloud.io/dashboard?id=cn.home1%3Amaven-build"><img src="https://sonarcloud.io/api/project_badges/measure?project=cn.home1%3Amaven-build&amp;metric=alert_status" alt="Sonar" />sonarcloud</a></p>
<p><a class="externalLink" href="https://ci-and-cd.github.io/ci-and-cd/release/index.html">Maven Site release (github.io)</a><br />
<a class="externalLink" href="https://maven-site.infra.top/ci-and-cd/maven-build/snapshot/staging/index.html">Maven site snapshot (infra.top)</a></p>
<p><a class="externalLink" href="https://oss.sonatype.org/content/repositories/releases/cn/home1/maven-build/">Artifacts (release)</a><br />
<a class="externalLink" href="https://oss.sonatype.org/content/repositories/snapshots/cn/home1/maven-build/">Artifacts (snapshot)</a></p>
<p><a class="externalLink" href="https://github.com/ci-and-cd/maven-build/tree/develop">Source Repository (github)</a><br />
<a class="externalLink" href="https://gitlab.com/ci-and-cd/maven-build/tree/develop">Source Repository (gitlab)</a></p>
<p><a class="externalLink" href="https://ci.appveyor.com/project/chshawkn/maven-build"><img src="https://ci.appveyor.com/api/projects/status/kacuklbdu48bt7l1?svg=true" alt="Build status" />appveyor</a><br />
<a class="externalLink" href="https://gitlab.com/ci-and-cd/maven-build/pipelines"><img src="https://gitlab.com/ci-and-cd/maven-build/badges/develop/pipeline.svg" alt="pipeline status" />gitlab-ci</a><br />
<a class="externalLink" href="https://travis-ci.org/ci-and-cd/maven-build"><img src="https://travis-ci.org/ci-and-cd/maven-build.svg?branch=develop" alt="Build Status" />travis-ci</a></p>
<p>Parent pom for maven based jar, war and docker projects</p>
<p>maven-build support multi-infrastructure and multi-stage (package deploy/publish segregation) build or deploy.</p>
<div class="section">
<h2><a name="I._Usage"></a>I. Usage</h2>
<p>Copy <tt>maven-build/src/main/maven/toolchains.xml</tt> to <tt>~/.m2/toolchains.xml</tt></p>

<div>
<div>
<pre class="source">cp src/main/maven/toolchains.xml ~/.m2/toolchains.xml
# or
cp src/main/maven/toolchains-darwin.xml ~/.m2/toolchains.xml
</pre></div></div>

<p>Update jdkHome in ~/.m2/toolchains.xml</p>
<p>Set maven-build as parent in maven projects.</p>

<div>
<div>
<pre class="source">    &lt;parent&gt;
        &lt;groupId&gt;cn.home1&lt;/groupId&gt;
        &lt;artifactId&gt;maven-build&lt;/artifactId&gt;
        &lt;version&gt;${version.maven-build}&lt;/version&gt;
    &lt;/parent&gt;
</pre></div></div>

<p>No dependency will be imported, maven-build only responsible for software engineering, it does not interfering dependency management.</p>
<p>TODO document about extensions see: <a class="externalLink" href="https://github.com/ci-and-cd/topinfra-maven/tree/develop/topinfra-mvnext-module-maven-build-pom">topinfra-mvnext-module-maven-build-pom</a> <a class="externalLink" href="https://github.com/ci-and-cd/topinfra-maven/tree/develop/topinfra-mvnext-module-infrastructure-settings">topinfra-mvnext-module-infrastructure-settings</a></p>

<div>
<div>
<pre class="source">mvn coreext:check
mvn coreext:install
</pre></div></div>

<p>if src/main/resources/Dockerfile absent or CI_OPT_MVN_MULTI_STAGE_BUILD=true (use script), no docker image is built at package phase. see profile &#x2018;dockerfile_maven_plugin-lifecycle_binding-when-not-mvn_multi_stage&#x2019; in pom.xml.</p>
<p>You need to provide few properties and environment variables, see next chapter.</p></div>
<div class="section">
<h2><a name="II._Properties.2C_Environment_variables_and_their_default_values"></a>II. Properties, Environment variables and their default values</h2>
<div class="section">
<h3><a name="a1._fetch_or_deploy"></a>1. fetch or deploy</h3>
<ul>

<li>private.nexus3</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="http://nexus3:28081/nexus/repository">http://nexus3:28081/nexus/repository</a> Set this property to a real world url.</p>
</blockquote>
<ul>

<li>private.nexus3</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="http://nexus3.localal:28081/nexus/repository">http://nexus3.localal:28081/nexus/repository</a> Set this property to a real world url.</p>
</blockquote>
<ul>

<li>publish.channel TODO publish.channel deprecated</li>
</ul>
<blockquote>

<p>default: snapshot Set this property to &#x2018;release&#x2019; when building release artifact. Note: CI_OPT_GITHUB_GLOBAL_REPOSITORYOWNER</p>
</blockquote></div>
<div class="section">
<h3><a name="a2._maven-surefire-plugin_and_maven-failsafe-plugin"></a>2. maven-surefire-plugin and maven-failsafe-plugin</h3>
<ul>

<li>maven.test.skip</li>
</ul>
<blockquote>

<p>default: false</p>
</blockquote>
<ul>

<li>maven.test.failure.ignore</li>
</ul>
<blockquote>

<p>default: false</p>
</blockquote>
<ul>

<li>skipITs</li>
</ul>
<blockquote>

<p>default: false</p>
</blockquote>
<ul>

<li>skipTests</li>
</ul>
<blockquote>

<p>default: false</p>
</blockquote></div>
<div class="section">
<h3><a name="a3._com.github.eirslett:frontend-maven-plugin"></a>3. com.github.eirslett:frontend-maven-plugin</h3>
<ul>

<li>frontend.nodeDownloadRoot</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="https://nodejs.org/dist/">https://nodejs.org/dist/</a></p>
</blockquote>
<ul>

<li>frontend.npmDownloadRoot</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="http://registry.npmjs.org/npm/-/">http://registry.npmjs.org/npm/-/</a></p>
</blockquote>
<p>Customize these properties only when building front-end projects and default sites are not reachable.</p></div>
<div class="section">
<h3><a name="a4._report"></a>4. report</h3>
<div class="section">
<h4><a name="a4.1_sonarqube"></a>4.1 sonarqube</h4>
<ul>

<li>private.sonar.host.url</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="http://sonarqube:9000">http://sonarqube:9000</a> - private.sonar.host.url default: <a class="externalLink" href="http://sonarqube:9000">http://sonarqube:9000</a></p>
</blockquote>
<p>Need these properties only when profile &#x2018;sonar&#x2019; is activated.</p></div>
<div class="section">
<h4><a name="a4.2_maven-checkstyle-plugin_and_maven-pmd-plugin"></a>4.2 maven-checkstyle-plugin and maven-pmd-plugin</h4>
<ul>

<li>checkstyle.config.location</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="https://raw.githubusercontent.com/ci-and-cd/maven-build/master/src/main/checkstyle/google_checks_8.10.xml">https://raw.githubusercontent.com/ci-and-cd/maven-build/master/src/main/checkstyle/google_checks_8.10.xml</a> Need to customize when github.com is not reachable.</p>
</blockquote>
<ul>

<li>pmd.ruleset.location</li>
</ul>
<blockquote>

<p>default: <a class="externalLink" href="https://raw.githubusercontent.com/ci-and-cd/maven-build/master/src/main/pmd/pmd-ruleset-6.4.0.xml">https://raw.githubusercontent.com/ci-and-cd/maven-build/master/src/main/pmd/pmd-ruleset-6.4.0.xml</a> Need to customize when github.com is not reachable.</p>
</blockquote>
<ul>

<li>project.reporting.outputEncoding</li>
</ul>
<blockquote>

<p>default: UTF-8</p>
</blockquote></div></div>
<div class="section">
<h3><a name="a5._site"></a>5. site</h3>
<ul>

<li>site.path</li>
</ul>
<blockquote>

<p>default: ${project.artifactId}-${publish.channel} TODO update doc Customize this properties if you want to publish relative projects&#x2019;s site into same parent directory, use same value on relative projects.</p>
</blockquote>
<ul>

<li>CI_OPT_OSSRH_GIT_AUTH_TOKEN</li>
</ul>
<blockquote>

<p>default: N/A (blank) - CI_OPT_GITHUB_GLOBAL_REPOSITORYOWNER default: N/A (blank)</p>
</blockquote>
<p>Need these properties only when deploy site to github.com.</p></div>
<div class="section">
<h3><a name="a6._GPG"></a>6. GPG</h3>
<ul>

<li>CI_OPT_GPG_KEYNAME</li>
</ul>
<blockquote>

<p>default: N/A (blank) - CI_OPT_GPG_PASSPHRASE default: N/A (blank)</p>
</blockquote>
<p>If you see &#x2018;gpg: signing failed: Inappropriate ioctl for device&#x2019; on OSX with gpg (2.2.x) installed by homebrew Edit config files: ~/.gnupg/gpg-agent.conf</p>

<div>
<div>
<pre class="source">allow-loopback-pinentry
</pre></div></div>

<p>~/.gnupg/gpg.conf</p>

<div>
<div>
<pre class="source">use-agent
pinentry-mode loopback
</pre></div></div>

<p>Need these properties only when deploy artifacts into maven central repository.</p></div>
<div class="section">
<h3><a name="a7._maven_central"></a>7. maven central</h3>
<ul>

<li>CI_OPT_OSSRH_NEXUS2_USER</li>
</ul>
<blockquote>

<p>Maven central&#x2019;s username - CI_OPT_OSSRH_NEXUS2_PASS Maven central&#x2019;s password</p>
</blockquote>
<p>Need these properties only when deploy artifacts into maven central repository.</p></div>
<div class="section">
<h3><a name="a8._maven-compiler-plugin_and_maven-javadoc-plugin"></a>8. maven-compiler-plugin and maven-javadoc-plugin</h3>
<ul>

<li>project.build.sourceEncoding</li>
</ul>
<blockquote>

<p>default: UTF-8</p>
</blockquote></div>
<div class="section">
<h3><a name="a9._docker"></a>9. docker</h3>
<p>com.spotify:dockerfile-maven-plugin</p>
<ul>

<li>docker.registry</li>
</ul></div></div>
<div class="section">
<h2><a name="III._Plugins"></a>III. Plugins</h2>
<div class="section">
<h3><a name="a1._build"></a>1. build</h3>
<p>com.github.eirslett:frontend-maven-plugin</p>
<p>com.amashchenko.maven.plugin:gitflow-maven-plugin</p>
<blockquote>

<p>GitFlow branch model</p>
</blockquote>
<p>maven-compiler-plugin with errorprone</p>
<blockquote>

<p>Source encoding. Java source and target version see maven-build-java*</p>
</blockquote>
<p>maven-enforcer-plugin</p>
<blockquote>

<p>Avoid dependency conflict</p>
</blockquote>
<p>maven-source-plugin</p>
<blockquote>

<p>Build jar of source code</p>
</blockquote>
<p>maven-surefire-plugin and maven-failsafe-plugin with includes and excludes configuration</p>
<p>pl.project13.maven:git-commit-id-plugin</p></div>
<div class="section">
<h3><a name="a2._report"></a>2. report</h3>
<p>org.asciidoctor:asciidoctor-maven-plugin org.owasp:dependency-check-maven org.codehaus.mojo:animal-sniffer-maven-plugin org.codehaus.mojo:findbugs-maven-plugin org.codehaus.mojo:jdepend-maven-plugin org.codehaus.mojo:taglist-maven-plugin org.codehaus.mojo:versions-maven-plugin maven-checkstyle-plugin maven-jxr-plugin maven-pmd-plugin maven-surefire-report-plugin</p></div>
<div class="section">
<h3><a name="a3._site"></a>3. site</h3>
<p>maven-site-plugin com.github.github:site-maven-plugin</p>
<p>maven-antrun-plugin</p>
<blockquote>

<p>auto clean &#x2018;${project.basedir}/src/site/markdown/README.md&#x2019; &#x2018;${project.basedir}/src/site/markdown/src/readme&#x2019; &#x2018;${project.basedir}/src/site/resources&#x2019;</p>
</blockquote>
<p>maven-resources-plugin</p>
<blockquote>

<p>copy &#x2018;${project.basedir}/README.md&#x2019; to &#x2018;${project.basedir}/src/site/markdown&#x2019; &#x2018;${project.basedir}/src/readme&#x2019; to &#x2018;${project.basedir}/src/site/markdown/src/readme&#x2019; &#x2018;${project.basedir}/src/readme&#x2019; to &#x2018;${project.basedir}/src/site/resources/src/readme&#x2019; &#x2018;${project.basedir}/src/site/markdown/images&#x2019; to &#x2018;${project.basedir}/src/site/resources/images&#x2019;</p>
</blockquote></div>
<div class="section">
<h3><a name="a4._docker"></a>4. docker</h3>
<p>io.fabric8:docker-maven-plugin</p>
<p>com.spotify:dockerfile-maven-plugin</p>
<blockquote>

<p>clean, build, push docker images</p>
</blockquote>
<p>maven-antrun-plugin</p>
<blockquote>

<p>clean filtered &#x2018;${project.basedir}/src/main/docker/Dockerfile&#x2019;</p>
</blockquote>
<p>maven-resources-plugin</p>
<blockquote>

<p>copy and filter contents from &#x2018;src/main/resources/docker&#x2019; into &#x2018;${project.basedir}/src/main/docker&#x2019;</p>
</blockquote>
<p>maven-deploy-plugin</p>
<blockquote>

<p>must run after docker-maven-plugin</p>
</blockquote></div></div>
<div class="section">
<h2><a name="IV._Profiles"></a>IV. Profiles</h2>
<div class="section">
<h3><a name="a1._build"></a>1. build</h3>
<p>infrastructure_ossrh</p>
<blockquote>

<p>Use maven central service. Deploy maven site to github.</p>
</blockquote>
<p>infrastructure_private</p>
<blockquote>

<p>Use nexus service at organization private (internal) network. Deploy maven site into organization private (internal) mvnsite.</p>
</blockquote>
<p>infrastructure_local</p>
<blockquote>

<p>Use nexus service at user&#x2019;s local (see <a href="../../docker-nexus3/README.html">docker-nexus3</a>). Deploy maven site into local mvnsite (see <a href="../../docker-proxy/README.html">docker-proxy</a>).</p>
</blockquote>
<p>git-commit-id</p>
<blockquote>

<p>Generate src/main/resources/git.properties. activate automatically if &#x2018;${maven.multiModuleProjectDirectory}/.git/HEAD&#x2019; exists</p>
</blockquote>
<p>mvn_multi_stage-merge_maven_repos-deploy-run-on-multi_module_root_only</p>
<blockquote>

<p>activate by set &#x2018;mvn.multi.stage.build.goal.deploy&#x2019; to &#x2018;true&#x2019;</p>
</blockquote>
<p>jacoco-build</p>
<blockquote>

<p>Test coverage report. activate by property &#x2018;jacoco&#x2019; absent (Enabled by default, to disable, set <tt>-Djacoco=false</tt>)</p>
</blockquote>
<p>cobertura</p>
<blockquote>

<p>activate by set property &#x2018;jacoco&#x2019; to &#x2018;false&#x2019;</p>
</blockquote>

<div>
<div>
<pre class="source">JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home&quot; mvn help:active-profiles clean package

JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk-10.jdk/Contents/Home&quot; mvn help:active-profiles clean package

JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk-9.0.4.jdk/Contents/Home&quot; mvn help:active-profiles clean package

JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home&quot; mvn help:active-profiles clean package
</pre></div></div>
</div>
<div class="section">
<h3><a name="a2._report"></a>2. report</h3>
<p>spring-restdocs</p>
<blockquote>

<p>activate by set property &#x2018;spring-restdocs&#x2019; to &#x2018;true&#x2019;</p>
</blockquote>
<p>reports-for-site</p>
<blockquote>

<p>activate by set property &#x2018;site&#x2019; to &#x2018;true&#x2019;</p>
</blockquote>
<p>jacoco-report</p>
<blockquote>

<p>activate by set property &#x2018;jacoco&#x2019; to &#x2018;true&#x2019;</p>
</blockquote>
<p>dependency-check</p>
<blockquote>

<p>Generate a detailed dependency report, This takes a long time, disabled by default. activate by set property &#x2018;dependency-check&#x2019; to &#x2018;true&#x2019; (<tt>mvn -Ddependency-check=true</tt>), need to be used together with <tt>site</tt> profile of build-site module.</p>
</blockquote>
<p>clirr</p>
<blockquote>

<p>activate by set property &#x2018;clirr&#x2019; to &#x2018;true&#x2019;</p>
</blockquote>
<p>sonar</p>
<blockquote>

<p>activate by set property &#x2018;sonar&#x2019; to &#x2018;true&#x2019;</p>
</blockquote></div>
<div class="section">
<h3><a name="a3._site"></a>3. site</h3>
<p>site</p>
<blockquote>

<p>Generate maven site for project, run <tt>mvn -Dsite=true site site:stage site:stage-deploy</tt> to active this profile and build site, set <tt>-Dsite.path=maven-build-snapshot</tt> to specify upload directory.</p>
</blockquote>
<p>infrastructure_ossrh_site_publish</p>
<blockquote>

<p>publish project site to github<br />
activate on property &#x2018;github.site.publish&#x2019; is true<br />
needs:<br />
env.CI_OPT_OSSRH_GIT_AUTH_TOKEN<br />
env.CI_OPT_GITHUB_GLOBAL_REPOSITORYOWNER</p>
</blockquote></div>
<div class="section">
<h3><a name="a4._docker"></a>4. docker</h3>
<p>dockerfile_maven_plugin-lifecycle_binding-when-not-mvn_multi_stage</p>
<blockquote>

<p>activate by property &#x2018;mvn.multi.stage.build&#x2019; absent build and push docker image automatically</p>
</blockquote></div></div>
<div class="section">
<h2><a name="V._Repositories"></a>V. Repositories</h2>
<p>central, spring-libs-release, spring-milestone, spring-libs-snapshot</p></div>
<div class="section">
<h2><a name="VI._Jira_and_gitlab_integration"></a>VI. Jira and gitlab integration</h2>
<p>Add args on <tt>maven site</tt></p>

<div>
<div>
<pre class="source">jira.projectKey         # jira projectKey
jira.user               # jira username
jira.password           # jira password
</pre></div></div>
</div>
<div class="section">
<h2><a name="VII._Appendices"></a>VII. Appendices</h2></div>
<div class="section">
<h2><a name="A._Example_.7E.2F.docker.2Fdaemon.json_of_Docker_for_Mac"></a>A. Example ~/.docker/daemon.json of Docker for Mac</h2>

<div>
<div>
<pre class="source">{
  &quot;debug&quot; : true,
  &quot;experimental&quot; : true,
  &quot;registry-mirrors&quot; : [
    &quot;https://docker.mirrors.ustc.edu.cn&quot;,
    &quot;http://hub-mirror.c.163.com&quot;,
    &quot;http://mirror.gcr.io&quot;
  ]
}
</pre></div></div>

<div class="section">
<h3><a name="B._Contribution_to_maven-build"></a>B. Contribution to maven-build</h3>
<div class="section">
<h4><a name="B.1._local_install.2Fdeploy_maven-build"></a>B.1. local install/deploy maven-build</h4>

<div>
<div>
<pre class="source">export MAVEN_HOME=&quot;${PWD}/../extension-core/target/apache-maven-3.6.1/apache-maven-3.6.1&quot;

cp src/main/maven/settings-global.xml /usr/local/Cellar/maven/3.6.1/libexec/conf/settings.xml

CI_OPT_INFRASTRUCTURE=&quot;ossrh&quot; ./mvnw -e -U clean install

CI_OPT_INFRASTRUCTURE=&quot;ossrh&quot; CI_OPT_ORIGIN_REPO=&quot;true&quot; CI_OPT_SONAR=&quot;true&quot; ./mvnw -e -Dsonar.login= -Dsonar.organization=home1-oss-github sonar:sonar

CI_OPT_GITHUB_SITE_PUBLISH=&quot;true&quot; CI_OPT_INFRASTRUCTURE=&quot;ossrh&quot; CI_OPT_OSSRH_GIT_AUTH_TOKEN=&quot;${CI_OPT_OSSRH_GIT_AUTH_TOKEN}&quot; CI_OPT_SITE=&quot;true&quot; CI_OPT_GITHUB_GLOBAL_REPOSITORYOWNER=&quot;ci-and-cd&quot; CI_OPT_SITE_PATH_PREFIX=&quot;maven-build&quot; ./mvnw -e -U clean install site-deploy

CI_OPT_GITHUB_SITE_PUBLISH=&quot;false&quot; CI_OPT_INFRASTRUCTURE=&quot;ossrh&quot; CI_OPT_OSSRH_MVNSITE_PASSWORD=&quot;${CI_OPT_OSSRH_MVNSITE_PASSWORD}&quot; CI_OPT_OSSRH_MVNSITE_USERNAME=&quot;${CI_OPT_OSSRH_MVNSITE_USERNAME}&quot; CI_OPT_NEXUS3=&quot;https://nexus3.infra.top&quot; CI_OPT_SITE=&quot;true&quot; CI_OPT_SITE_PATH_PREFIX=&quot;ci-and-cd/maven-build&quot; ./mvnw -e -U clean install site site:stage site:stage-deploy
</pre></div></div>
</div>
<div class="section">
<h4><a name="B.2_Pull_request"></a>B.2 Pull request</h4>
<p>Please open PR on develop branch.</p></div></div>
<div class="section">
<h3><a name="C._GPG_issues"></a>C. GPG issues</h3>

<div>
<div>
<pre class="source">gpg: signing failed: Inappropriate ioctl for device
</pre></div></div>

<p>To solve the problem, you need to enable loopback pinentry mode.</p>
<p>Add this to ~/.gnupg/gpg.conf:</p>

<div>
<div>
<pre class="source">use-agent 
pinentry-mode loopback
</pre></div></div>

<p>And add this to ~/.gnupg/gpg-agent.conf, creating the file if it doesn&#x2019;t already exist:</p>

<div>
<div>
<pre class="source">allow-loopback-pinentry
</pre></div></div>
</div>
<div class="section">
<h3><a name="References"></a>References</h3>
<p>see: <a class="externalLink" href="https://github.com/APNIC-net/repositoryd/blob/master/pom.xml">https://github.com/APNIC-net/repositoryd/blob/master/pom.xml</a></p>
<p>see: <a class="externalLink" href="https://github.com/stevespringett/dependency-check-sonar-plugin/tree/SonarQube_6.x">https://github.com/stevespringett/dependency-check-sonar-plugin/tree/SonarQube_6.x</a> see: <a class="externalLink" href="https://docs.sonarqube.org/display/PLUG/JaCoCo+Plugin">https://docs.sonarqube.org/display/PLUG/JaCoCo+Plugin</a></p>
<p>Java 11 see: <a class="externalLink" href="https://dzone.com/articles/apis-to-be-removed-from-java-11">https://dzone.com/articles/apis-to-be-removed-from-java-11</a> see: <a class="externalLink" href="https://medium.com/criciumadev/its-time-migrating-to-java-11-5eb3868354f9">https://medium.com/criciumadev/its-time-migrating-to-java-11-5eb3868354f9</a> see: <a class="externalLink" href="https://dzone.com/articles/migrating-springboot-applications-to-latest-java-v">https://dzone.com/articles/migrating-springboot-applications-to-latest-java-v</a></p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2019.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
